{% extends 'base.html' %}
{% load static %}

{% block title %}Hesabatlar{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/sifaris_izleme.css' %}">
{% endblock %}

{% block content %}
<nav class="header-nav">
    <h2>Hesabatlar</h2>
</nav>

<div class="statistic">
    <div class="stat-item">
        <h3>Ümumi Məbləğ</h3>
        <p class="amount-info">{{ toplam_mebleg|floatformat:2 }} ₼</p>
    </div>
    <div class="stat-item">
        <h3>Ödənilən Məbləğ</h3>
        <p class="amount-info-1">{{ odenilen_mebleg|floatformat:2 }} ₼</p>
    </div>
    <div class="stat-item">
        <h3>Qalıq Borc</h3>
        <p class="qaliq-borc {% if qaliq_borc < 0 %}qaliq-borc-pozitiv{% else %}qaliq-borc-negativ{% endif %}">
            {{ qaliq_borc|floatformat:2 }} ₼
        </p>
    </div>
</div>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Tarix</th>
                <th>Cəmi Məbləğ</th>
                <th>Ödənilən Məbləğ</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for sifaris in sifarisler %}
            <tr>
                <td><a href="{% url 'sifaris_detallari' sifaris.id %}" class="sifaris-link">{{ sifaris.id }}</a></td>
                <td>{{ sifaris.formatted_tarix }}</td>
                <td>{{ sifaris.cemi_mebleg|floatformat:2 }} ₼</td>
                <td>{{ sifaris.odenilen_mebleg|floatformat:2 }} ₼</td>
                <td>
                    <div class="status-container">
                        <span class="status-badge1 status-{{ sifaris.status }}">
                            {% if sifaris.status == 'gozleyir' %}
                                <i class="fas fa-clock pulse"></i>
                            {% elif sifaris.status == 'hazirlanir' %}
                                <i class="fas fa-box-open bounce"></i>
                            {% elif sifaris.status == 'yoldadir' %}
                                <div class="truck-container">
                                    <i class="fas fa-truck truck-icon"></i>
                                    <div class="smoke"></div>
                                </div>
                            {% elif sifaris.status == 'catdirildi' %}
                                <i class="fas fa-check-circle tada"></i>
                            {% endif %}
                            {{ sifaris.display_status }}
                        </span>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/sifaris.js' %}"></script>
{% endblock %} 