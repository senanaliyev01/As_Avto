{% extends "admin/base_site.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<style>
    @keyframes blink {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
    }
    
    .new-orders-badge {
        background-color: #ba2121;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 12px;
        margin-left: 5px;
        animation: blink 1s infinite;
    }
    
    .new-orders-link {
        position: relative;
    }
</style>
{% endblock %}

{% block nav-global %}
{{ block.super }}
<script>
    function updateNewOrdersCount() {
        fetch('/admin/get-new-orders-count/')
            .then(response => response.json())
            .then(data => {
                const badge = document.getElementById('new-orders-badge');
                if (data.count > 0) {
                    badge.textContent = data.count;
                    badge.style.display = 'inline-block';
                } else {
                    badge.style.display = 'none';
                }
            });
    }

    // Hər 30 saniyədə bir yenilə
    setInterval(updateNewOrdersCount, 30000);
    // Səhifə yükləndikdə də yoxla
    document.addEventListener('DOMContentLoaded', updateNewOrdersCount);
</script>
{% endblock %} 